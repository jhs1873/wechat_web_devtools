!function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(o,a,function(t){return e[t]}.bind(null,a));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=251)}({251:function(e,t,n){const o=n(252),a=n(254);o.registerCallback(e=>{let{command:t,data:n}=e;"SET_CANVAS"===t?a.setCanvas(n):"DRAW_CANVAS"==t&&a.drawCanvas(n)})},252:function(e,t,n){function o(){a.connect("WIDGET"),document.getElementById("myCanvas").addEventListener("click",function(e){console.error(e),a.send({command:"ON_CANVAS_TAP",data:{x:e.pageX,y:e.pageY}})})}const a=n(253);navigator.userAgent,"complete"==document.readyState?o():window.addEventListener("load",()=>{o()}),e.exports={send:a.send,registerCallback:a.registerCallback}},253:function(e){function t(e){i&&i.readyState===o.OPEN?i.send(JSON.stringify(e)):f.push(e)}var n=window.navigator||window.__global.navigator,o=window.WebSocket||window.__global.WebSocket,a=window.prompt||window.__global.prompt,r=n.userAgent.match(/port\/(\d*)/),l=r?parseInt(r[1]):void 0,i=null,s=`ws://127.0.0.1:${l}`,c=null,d=[],f=[],u=0,p=10;const h=100,w="GET_MESSAGE_TOKEN";e.exports={connect:function e(n){if(!l)throw new Error("message port undefined");if(!(u++>=p)){c=n||c;var r=a(w);(i=new o(s,`${c}#${r}#`)).onopen=function(){let e=[].concat(f);f=[],e.forEach(e=>{t(e)})},i.onclose=function(){i=null,setTimeout(()=>{u<h&&(u++,e(n))},1e3)},i.onmessage=function(e){try{!function(e){d.forEach(t=>{try{t.call(this,e)}catch(e){console.error(e)}})}(JSON.parse(e.data))}catch(e){}}}},send:t,registerCallback:e=>{d.push(e)},getWs:()=>i}},254:function(e){const t=e=>{var t=e.slice(0);return t[3]/=255,`rgba(${t.join(",")})`};let n={};const o=function(e,o=!1){if(!e)return;const a=document.getElementById("myCanvas"),r=a.getContext("2d");!1===o&&(r.fillStyle="#000000",r.strokeStyle="#000000",r.shadowColor="#000000",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0,r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,a.width,a.height)),e.forEach(function(e){var o=e.method,a=e.data;if(/^set/.test(o)){var l=o[3].toLowerCase()+o.slice(4),i=void 0;if("fillStyle"===l||"strokeStyle"===l){if("normal"===a[0])i=t(a[1]);else if("linear"===a[0]){i=r.createLinearGradient.apply(r,a[1]);a[2].forEach(function(e){var n=e[0],o=t(e[1]);i.addColorStop(n,o)})}else if("radial"===a[0]){var s=a[1][0],c=a[1][1],d=a[1][2];i=r.createRadialGradient.apply(r,[s,c,0,s,c,d]);a[2].forEach(function(e){var n=e[0],o=t(e[1]);i.addColorStop(n,o)})}r[l]=i}else if("globalAlpha"===l)r[l]=a[0]/255;else if("shadow"===l){var f=["shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor"];a.forEach(function(e,n){r[f[n]]="shadowColor"===f[n]?t(e):e})}else"fontSize"===l?r.font=r.font.replace(/\d+\.?\d*px/,a[0]+"px"):"textBaseline"===l?("normal"===a[0]&&(a[0]="alphabetic"),r[l]=a[0]):r[l]=a[0]}else if("fillPath"===o||"strokePath"===o)o=o.replace(/Path/,""),r.beginPath(),a.forEach(function(e){r[e.method].apply(r,e.data)}),r[o]();else if("fillText"===o)r.fillText.apply(r,a);else if("drawImage"===o){let[e,...t]=a;n=n||{},e=0==(e=e.replace("wxfile://","http://wxfile.open.weixin.qq.com/")).indexOf("/")||0==e.indexOf("\\")?`.${e}`:e,n[e]?n[e].ready?r.drawImage.apply(r,[n[e],...t]):n[e].queue.push(t):(n[e]=new Image,n[e].src=e,n[e].queue=[],n[e].onload=()=>{n[e].ready=!0,r.drawImage.apply(r,[n[e],...t]),n[e].queue.forEach(t=>{r.drawImage.apply(r,[n[e],...t])}),n[e].queue=[]})}else r[o].apply(r,a)})};e.exports={drawCanvas:function(e){let t=e.args,{actions:n,reserve:a}=t;o(n,a)},setCanvas:function(e){let t=document.getElementById("myCanvas");e.width&&t.setAttribute("width",e.width),e.height&&t.setAttribute("height",e.height),e.style&&t.setAttribute("style",e.style)}}}});